---
title: linux命令
date: 2022-11-02 13:29:11
link: https://wangchujiang.com/linux-command/
categories: 
  - 运维
  - 命令集合
tags: 
  - 命令集合
author: 
  name: hincky
  link: https://github.com/hincky
permalink: /pages/7dcd11/
---
[[toc]]
[linux命令查询页](https://wangchujiang.com/linux-command/)

## shell特殊变量
```sh
# 前一个命令的参数，比如创建目录并打开 mkdir -p a/b/c && cd $_
$_

```

## linux换源、centos换源
centos7
```sh
sudo mv /etc/yum.repos.d/CentOS-Base.repo /etc/yum.repos.d/CentOS-Base.repo.backup
sudo wget -O /etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-7.repo
sudo yum clean all
sudo yum makecache
sudo yum update -y # 验证是否换源成功
```

非阿里云服务器，其他厂商云服务器使用阿里云镜像
```sh
sudo mv /etc/yum.repos.d/CentOS-Base.repo /etc/yum.repos.d/CentOS-Base.repo.backup
sudo wget -O /etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-7.repo
sed -i -e '/mirrors.cloud.aliyuncs.com/d' -e '/mirrors.aliyuncs.com/d' /etc/yum.repos.d/CentOS-Base.repo
sudo yum clean all
sudo yum makecache
sudo yum update -y # 验证是否换源成功
```

## 创建用户、密码

```sh
useradd es # 创建用户es
echo "password" | passwd --stdin es # 设定es用户的密码是password

passwd -l es # 锁定es用户
passwd -u es 	# 解除对es的锁定
passwd -d docker # 清除docker用户的密码
passwd -S docker # 显示docker用户的密码状态

```


## 文件和目录列表

```sh
# -F区分文件和目录，以/结尾就是目录，以*结尾就是可执行文件；
ls -F

# -a列出所有文件，以.开头就是隐藏文件
ls -a 

# -l展示更多信息，-h显示容量，带上具体大小单位
ls -lh

# 过滤器，?代表单个，*代表零个或多个
ls -l my_sc?pt
ls -l my_sc*pt

# 通配符 [ai]代表a或者i；[a-i]代表a到i；[!a]代表不是a的都选上
ls -l my_scr[ai]pt
ls -l my_scr[a-i]pt

# 创建多级目录并打开
mkdir -p a/b/c && cd $_

# 或者在bashrc里面添加自定义函数
vim ~/.bashrc

mkcd () {
mkdir -p "$"
cd "$"
}

source ~/.bashrc

# 创建多个目录
mkdir -p a b c && ls -F

# 创建文件
touch new_file

# 改变文件的修改时间
touch -a new_file && ls -l

```

### 查看占用cpu/内存的进程，并找到进程运行位置

```sh
top # shift+p，按照cpu占用排序，找到pid
ls -l /proc/[pid]/exe

top # shift+m，按照内存占用排序，找到pid
ls -l /proc/[pid]/exe
```

### 查看文件以及查找文件

```sh
# 查看文件类型
file my_file

# 查看文件，给所有行都加上行号
cat -n text1

# 只给有文本的行加上行号（非空行加上行号）
cat -b text1

# 根据名字查找文件，在/目录下查找名字是tong的文件
find / -name tong

# 查找根目录下大于1G的文件
find / -type f -size +1G
find / -type f -size +100M

# 在查询大于1G文件的同时，显示创建者、size（以b为单位）、修改日期、路径；
find / -type f -size +1G  -print0 | xargs -0 ls -l

# 查询大文件并排序,显示文件大小和路径，如需查看详情信息，将 du -h 改为 ls -l 即可
find / -type f -size +1G  -print0 | xargs -0 du -h | sort -nr

```

### 查找文本或内容
```sh
# 查找一个字符串在多个文件中的出现情况：
grep "search_string" file1 file2 file3

#其中，search_string是您要查找的字符串，file1、file2和file3是您要在其中查找字符串的文件名。

如果您要在一个目录中查找所有文件中的字符串，则可以使用grep命令的-r选项，如下所示：

bash
Copy code
grep -r "search_string" /path/to/directory
这将在/path/to/directory目录中递归搜索并打印所有包含search_string的行。

如果您希望在查找结果中显示匹配行所在的文件名和行号，则可以使用grep命令的-n和-H选项，如下所示：

bash
Copy code
grep -rnH "search_string" /path/to/directory
这将在/path/to/directory目录中递归搜索并打印所有包含search_string的行，同时显示每个匹配行所在的文件名和行号。

除了grep命令之外，还有其他一些工具可以帮助您查找文本内容，如ack和ag等。这些工具通常比grep命令更快和更灵活。
```


## 文件拷贝

```sh
# linux如何将文件稳定地拷贝到远程的机子上
scp [可选参数] [源文件或目录] [目标地址]
# -r：递归拷贝整个目录。
# -P：指定远程服务器的端口号。
# -p：保留原文件的修改时间、访问时间和权限

# 将本地的文件 localfile.txt 拷贝到远程机器 192.168.1.100 的 /home/user 目录下
scp localfile.txt username@192.168.1.100:/home/user/

# 要递归拷贝整个目录，可以加上 -r 参数
scp -r localdir/ username@192.168.1.100:/home/user/
```

## 日志
- tail
- head
- cat
- tac
- echo

```sh
# 从第3000行开始，显示1000行。即显示3000~3999行
cat test.log | tail -n +3000 | head -n 1000

# >意思是创建，>>是追加

```

## sed

**sed编辑器不会修改文本文件的数据**，只会将修改后的数据发送到stdout；**查看原理的文本文件，依然时原始数据**

```sh
# s命令用于替换，将前者用后者替换
echo "this is a dog" | sed 's/dog/cat/' 

# 所有brown替换成green，但是实际上不生效，cat查看还是brown
sed 's/brown/green/' demo.txt

# -i 生效，cat查看变成green
sed -i 's/brown/green/' demo.txt

# 如果要执行多个sed命令，要用-e；下面就是将文件中所有brown和dog替换掉
sed -e 's/brown/green/; s/dog/cat/' demo.txt

# 如果要从文件中读取命令，要用-f；

sed -e 's/brown/green/; s/dog/cat/' demo.txt
```

### sed进阶
```sh


```

## gawk
```sh


```

### gawk进阶
```sh


```


